# ğŸŒŠ Wave æ„å›¾æ˜ å°„å±‚
# å°†é«˜çº§æ„å›¾æ˜ å°„åˆ°è§„åˆ™ç»„åˆ

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# æ¦‚å¿µç±»å‹
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

concept_type {
    entity: 1      # å®ä½“ï¼ˆå¯¹è±¡ï¼‰
    action: 2      # è¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰
    relation: 3    # å…³ç³»
    property: 4    # å±æ€§
    state: 5       # çŠ¶æ€
    context: 6     # ä¸Šä¸‹æ–‡
    pattern: 7     # æ¨¡å¼
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# æ¦‚å¿µå®šä¹‰
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

concept {
    name: ""
    type: 0
    rules: []      # å…³è”çš„è§„åˆ™
    related: []    # ç›¸å…³æ¦‚å¿µ
}

# åˆ›å»ºæ¦‚å¿µ
fn concept.create name type {
    -> { name: name, type: type, rules: [], related: [] }
}

# æ˜ å°„æ¦‚å¿µåˆ°è§„åˆ™
fn concept.map_rules concept {
    when concept.type == concept_type.entity {
        concept.rules <- gravitational
        concept.rules <- boundary
    }
    when concept.type == concept_type.action {
        concept.rules <- tension
        concept.rules <- evolution
    }
    when concept.type == concept_type.relation {
        concept.rules <- connection
        concept.rules <- orbital
    }
    when concept.type == concept_type.state {
        concept.rules <- entropy
        concept.rules <- memory
    }
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# æ„å›¾åˆ°è§„åˆ™æ˜ å°„
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# out "text" â†’ è¾“å‡ºè§„åˆ™ç»„åˆ
intent out {
    rules: [tension, connection]
    action: syscall_write
    target: stdout
}

# emit "bytes" â†’ åŸå§‹å­—èŠ‚è§„åˆ™
intent emit {
    rules: [unified]
    action: direct_output
    target: binary
}

# fn name { } â†’ å‡½æ•°å®šä¹‰è§„åˆ™
intent fn {
    rules: [boundary, memory]
    action: define_callable
    target: code_section
}

# when cond { } â†’ æ¡ä»¶è§„åˆ™
intent when {
    rules: [tension, entropy]
    action: conditional_branch
    target: instruction_pointer
}

# loop { } â†’ å¾ªç¯è§„åˆ™
intent loop {
    rules: [orbital, tension]
    action: repeat_block
    target: instruction_pointer
}

# x = value â†’ èµ‹å€¼è§„åˆ™
intent assign {
    rules: [memory, connection]
    action: store_value
    target: variable_space
}

# a -> b -> c â†’ ç®¡é“è§„åˆ™
intent pipeline {
    rules: [connection, orbital, evolution]
    action: chain_transform
    target: data_flow
}

# keep â†’ ä¿æŒè§„åˆ™
intent keep {
    rules: [memory, boundary, orbital]
    action: maintain_structure
    target: event_loop
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# å›¾å½¢æ„å›¾
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

intent draw.rect {
    rules: [boundary, tension]
    action: rasterize_rect
    target: framebuffer
}

intent draw.circle {
    rules: [curvature, boundary]
    action: rasterize_circle
    target: framebuffer
}

intent draw.line {
    rules: [connection, tension]
    action: rasterize_line
    target: framebuffer
}

intent draw.text {
    rules: [memory, connection]
    action: rasterize_glyphs
    target: framebuffer
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# æ ·å¼æ„å›¾
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

intent style {
    rules: [memory, unified]
    action: define_properties
    target: style_registry
}

intent apply {
    rules: [connection, memory]
    action: activate_style
    target: current_context
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# äº‹ä»¶æ„å›¾
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

intent on.click {
    rules: [connection, tension, memory]
    action: bind_handler
    target: event_registry
}

intent on.key {
    rules: [connection, memory]
    action: bind_handler
    target: event_registry
}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Fate æ§åˆ¶æ„å›¾
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# fate on â†’ å¯ç”¨åŠ¨æ€ä¼˜åŒ–
intent "fate on" {
    rules: [unified, evolution]
    action: fate.enable
    target: fate_scheduler
}

# fate off â†’ åˆ‡æ¢åˆ°é™æ€æ¨¡å¼
intent "fate off" {
    rules: [unified, memory]
    action: fate.disable
    target: fate_scheduler
}

